<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Creating a Feature</title>
  <script th:replace="fragments/header :: headerElement"></script>
</head>
<body>
  <script th:replace="fragments/header :: header"></script>

      <div class="container" >
      	  <div class="row">
      	    <div >
	      	  <h1>New Feature</h1>
      	    </div>
      	    <div >
	      	  <span class="badge badge-secondary " th:text="${feature.status}" style="font-size: small; margin-top: 1.5em; margin-left: 1em"></span>
      	    </div>
      	  </div>
	      <form action="" method="post">
	        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
	        <input type="hidden" th:field="${feature.id}">
	        <input type="hidden" th:field="${feature.product}">
	        <input type="hidden" th:field="${feature.status}">
	      	<div class="form-group">
		      	<label for="title">Title: </label>
		      	<input type="text" id="title" th:field="${feature.title}" class="form-control" th:attrappend="disabled=${user.id==feature.user.id ? null : 'disabled'}" />
	      	</div>
	      	<div class="form-group">
		      	<label for="title" >Description: </label>
		      	<textarea  id="title" th:field="${feature.description}" class="form-control" th:attrappend="disabled=${user.id==feature.user.id ? null : 'disabled'}" ></textarea>
	      	</div>
	      	<div th:if="${user.id==feature.user.id}">
		      	<button type="submit" class="btn btn-primary btn-lg"  >Save</button>
	      	</div>
	      </form>
	      		<h2>Comments</h2>
		      		<form action="">
		      			<div class="form-group" style="margin-top: 1.5em">
			      			<label for = exampleFormControlTextArea>Leave a comment below</label>
			      			<textarea  id="exampleFormControlTextArea"  rows="3" class="form-control" ></textarea>
		      			</div>
		      		</form>
	      			<div th:each="comment:${comments}">
	      				<span  th:text="${comment.text}"></span>
	      				<div th:each=commentLevel1:${comment.comments} style="margin-left: 1em " >
	      					<span th:text="${commentLevel1.text}"></span>
	      					<div th:each=commentLevel2:${commentLevel1.comments} style="margin-left: 1em " >
	      						<span th:text="${commentLevel2.text}"></span>
	      						<div th:each=commentLevel3:${commentLevel2.comments} style="margin-left: 1em " >
	      							<span th:text="${commentLevel3.text}"></span>
	      						</div>
	      					</div>
	      				</div>
	      			</div>
      </div>
</body>
</html>